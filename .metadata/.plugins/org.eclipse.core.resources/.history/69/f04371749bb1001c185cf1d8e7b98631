/*
 * flash.c
 *
 *  Created on: 2022. 4. 1.
 *      Author: uylee
 */


#include "flash.h"

#define FLASH_SECTOR_MAX    64

typedef struct

{
  uint32_t addr;
  uint16_t length;
} flash_tbl_t;

static flash_tbl_t flash_tbl[FLASH_SECTOR_MAX];

bool flashInit(void)
{
  for (int i=0; i< FLASH_SECTOR_MAX; i++)
  {
    flash_tbl[i].addr   = (0x8000000 + i*1024);
    flash_tbl[i].length = 1024;
  }

  return true;
}

bool flashErase(uint32_t addr, uint32_t length)
{

}

bool flashWrite(uint32_t addr, uint8_t *p_data, uint32_t length)
{

}

bool flashRead(uint32_t addr, uint8_t *p_data, uint32_t length)
{

}

bool flashInSector(uint32_t sector_num, uint32_t addr, uint32_t length)
{
  bool ret = false;

  uint32_t sector_start;
  uint32_t sector_end;
  uint32_t flash_start;
  uint32_t flash_end;

  sector_start = flash_tbl[sector_num].addr;
  sector_end   = flash_tbl[sector_num].addr + flash_tbl[sector_num].length - 1;
  flash_start  = addr;
  flash_end    = addr + length - 1;

  if (sector_start >=flash_start && sector_start <= flash_end)
  {

  }

  return ret;
}
